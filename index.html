<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Music Hackathon - Harmony, 2017</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	
	<script type="text/javascript" src="Tone.js"></script>
	<script type="text/javascript" src="jquery.min.js"></script>

	<script type="text/javascript">
		// jshint ignore: start
	</script>

</head>
<body>	

	<style type="text/css">

		.keyboard button {
			width: 70px;
			height: 100px;
			outline: 0;
			padding: 20px;
			border-radius: 10px;
			border: 0;
			background-color: #bada55;
			border: 4px solid #00dd00;
			transition: 0.5s;
		}

		.keyboard button:hover {
			background-color: yellow;
		}

		.keyboard button.active {
			border: 4px solid blue;
		}

		.row {
			margin: 5px;
		}

		.row-2 {
			position: relative;
			top: 0;
			left: 35px;
		}

		.row-3 {
			position: relative;
			top: 0;
			left: 70px;
		}

		.row-4 {
			position: relative;
			top: 0;
			left: 105px;
		}

	</style>

	<div class="keyboard">

		<div class="row row-1">
			<button class="A3"  data-value="9">A</button>
			<button class="A#3" data-value="10">A#</button>
			<button class="B3"  data-value="11">B</button>
			<button class="C3"  data-value="0">C</button>
			<button class="C#3" data-value="1">C#</button>
			<button class="D3"  data-value="2">D</button>
			<button class="D#3" data-value="3">D#</button>
			<button class="E3"  data-value="4">E</button>
			<button class="F3"  data-value="5">F</button>
			<button class="F#3" data-value="6">F#</button>
			<button class="G3"  data-value="7">G</button>
			<button class="G#3" data-value="8">G#</button>
		</div>

		<div class="row row-2">
			<button class="A4"  data-value="9">A</button>
			<button class="A#4" data-value="10">A#</button>
			<button class="B4"  data-value="11">B</button>
			<button class="C4"  data-value="0">C</button>
			<button class="C#4" data-value="1">C#</button>
			<button class="D4"  data-value="2">D</button>
			<button class="D#4" data-value="3">D#</button>
			<button class="E4"  data-value="4">E</button>
			<button class="F4"  data-value="5">F</button>
			<button class="F#4" data-value="6">F#</button>
			<button class="G4"  data-value="7">G</button>
			<button class="G#4" data-value="8">G#</button>
		</div>

		<div class="row row-3">
			<button class="A5"  data-value="9">A</button>
			<button class="A#5" data-value="10">A#</button>
			<button class="B5"  data-value="11">B</button>
			<button class="C5"  data-value="0">C</button>
			<button class="C#5" data-value="1">C#</button>
			<button class="D5"  data-value="2">D</button>
			<button class="D#5" data-value="3">D#</button>
			<button class="E5"  data-value="4">E</button>
			<button class="F5"  data-value="5">F</button>
			<button class="F#5" data-value="6">F#</button>
			<button class="G5"  data-value="7">G</button>
			<button class="G#5" data-value="8">G#</button>
		</div>

		<div class="row row-4">
			<button class="A6"  data-value="9">A</button>
			<button class="A#6" data-value="10">A#</button>
			<button class="B6"  data-value="11">B</button>
			<button class="C6"  data-value="0">C</button>
			<button class="C#6" data-value="1">C#</button>
			<button class="D6"  data-value="2">D</button>
			<button class="D#6" data-value="3">D#</button>
			<button class="E6"  data-value="4">E</button>
			<button class="F6"  data-value="5">F</button>
			<button class="F#6" data-value="6">F#</button>
			<button class="G6"  data-value="7">G</button>
			<button class="G#6" data-value="8">G#</button>
		</div>

	</div>

	<script type="text/javascript">

		var isDesktop = typeof window.orientation === 'undefined';


		var synth = new Tone.PolySynth(3, Tone.Synth, {
			"oscillator" : {
				"type" : "fatsawtooth",
				"count" : 3,
				"spread" : 30
			},
			"envelope": {
				"attack": 0.01,
				"decay": 0.1,
				"sustain": 0.5,
				"release": 0.4,
				"attackCurve" : "exponential"
			},
		}).toMaster();

		if (isDesktop) {
			$('.keyboard button').on('mousedown', function() {
				var note = $(this).attr('class');
				if (note) {
					synth.triggerAttackRelease(note, 5000);
				}
			});
			$(document).on('mouseup', function() {
				synth.releaseAll();
			});
		}
		else {
			$('.keyboard button').on('touchstart', function() {
				alert('touch start');
		
				var note = $(this).attr('class');
				if (note) {
					synth.triggerAttackRelease(note, 5000);
				}
			});

			$(document).on('touchend', function() {
				synth.releaseAll();
			});
		}

	</script>

	</style>
</body>
</html>